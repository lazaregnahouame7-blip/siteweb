<!DOCTYPE html>
<html lang="fr" class="no-js">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROTOCOLE OM√âGA v2.0 - Acc√®s Ultra-S√©curis√©</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üîí</text></svg>">
    
    <style>
        /* ===== SYST√àME ANTI-INSPECTION ===== */
        body.anti-inspect::before {
            content: "ACC√àS INTERDIT";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            color: #ff0000;
            font-size: 3em;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999999;
            font-family: 'Courier New', monospace;
        }

        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .no-context {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* ===== SYST√àME PRINCIPAL ===== */
        :root {
            --primary-matrix: #0f0;
            --secondary-matrix: #0ff;
            --error-red: #ff3333;
            --warning-yellow: #ffcc00;
            --depth-black: #000000;
            --ui-glow: 0 0 15px currentColor;
            --terminal-bg: rgba(5, 15, 5, 0.95);
            --neon-border: 1px solid var(--primary-matrix);
            --font-main: 'Segoe UI', 'Consolas', 'Monaco', monospace;
            --transition-speed: 0.3s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: default;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: var(--depth-black);
            font-family: var(--font-main);
            color: var(--primary-matrix);
            position: relative;
        }

        /* ===== √âCRAN CRT R√âALISTE ===== */
        .crt-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(
                    rgba(0, 255, 0, 0.02) 50%,
                    rgba(0, 0, 0, 0.25) 50%
                ),
                linear-gradient(
                    90deg,
                    rgba(255, 0, 0, 0.03),
                    rgba(0, 255, 0, 0.01),
                    rgba(0, 0, 255, 0.03)
                );
            background-size: 100% 3px, 4px 100%;
            pointer-events: none;
            z-index: 1000;
            animation: scanlines 8s linear infinite;
        }

        .crt-glow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                ellipse at center,
                transparent 0%,
                rgba(0, 255, 0, 0.03) 70%,
                transparent 100%
            );
            pointer-events: none;
            z-index: 999;
            animation: pulse 4s ease-in-out infinite;
        }

        /* ===== CANVAS MATRIX AVANC√â ===== */
        #matrix-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 0.7;
        }

        #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            opacity: 0.3;
        }

        /* ===== INTERFACE UTILISATEUR ===== */
        #game-container {
            position: relative;
            z-index: 100;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: radial-gradient(
                ellipse at center,
                rgba(0, 20, 0, 0.4) 0%,
                rgba(0, 0, 0, 0.9) 70%
            );
        }

        /* ===== TERMINAL PRINCIPAL ===== */
        .main-terminal {
            width: 90%;
            max-width: 1200px;
            min-height: 600px;
            background: var(--terminal-bg);
            border: var(--neon-border);
            border-radius: 8px;
            box-shadow: 
                0 0 30px rgba(0, 255, 0, 0.3),
                inset 0 0 30px rgba(0, 255, 0, 0.1);
            overflow: hidden;
            position: relative;
            animation: terminalBoot 2s ease-out;
        }

        .terminal-header {
            background: linear-gradient(
                to right,
                rgba(0, 30, 0, 0.9),
                rgba(0, 50, 0, 0.8)
            );
            padding: 15px 20px;
            border-bottom: var(--neon-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: var(--ui-glow);
        }

        .header-status {
            display: flex;
            gap: 30px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-led {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--primary-matrix);
            box-shadow: 0 0 10px var(--primary-matrix);
            animation: blink 2s infinite;
        }

        .led-red { background: #ff0000; box-shadow: 0 0 10px #ff0000; }
        .led-green { background: var(--primary-matrix); box-shadow: 0 0 10px var(--primary-matrix); }
        .led-blue { background: var(--secondary-matrix); box-shadow: 0 0 10px var(--secondary-matrix); }

        .terminal-body {
            padding: 30px;
            height: 500px;
            overflow-y: auto;
            font-family: 'Consolas', monospace;
            line-height: 1.6;
            font-size: 1.1em;
        }

        .terminal-output {
            margin-bottom: 20px;
        }

        .output-line {
            margin-bottom: 8px;
            opacity: 0;
            animation: typeIn 0.1s forwards;
            animation-delay: calc(var(--line-index) * 0.05s);
        }

        .prompt-line {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
        }

        .prompt {
            color: var(--warning-yellow);
            font-weight: bold;
            white-space: nowrap;
        }

        .prompt-cursor {
            display: inline-block;
            width: 8px;
            height: 20px;
            background: var(--primary-matrix);
            animation: blink 1s infinite;
            margin-left: 2px;
        }

        /* ===== SYST√àME D'ENTR√âE ===== */
        .input-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
            position: relative;
        }

        #command-input {
            flex: 1;
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--primary-matrix);
            color: var(--primary-matrix);
            font-family: 'Consolas', monospace;
            font-size: 1.1em;
            padding: 10px 0;
            outline: none;
            caret-color: var(--primary-matrix);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        #command-input::placeholder {
            color: rgba(0, 255, 0, 0.3);
            font-style: italic;
        }

        .input-button {
            background: rgba(0, 255, 0, 0.1);
            border: 2px solid var(--primary-matrix);
            color: var(--primary-matrix);
            padding: 10px 20px;
            font-family: 'Consolas', monospace;
            font-size: 0.9em;
            cursor: pointer;
            transition: all var(--transition-speed);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .input-button:hover {
            background: rgba(0, 255, 0, 0.3);
            box-shadow: 0 0 15px var(--primary-matrix);
        }

        .input-button:active {
            transform: scale(0.95);
        }

        /* ===== SYST√àME DE MESSAGES ===== */
        .message-system {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            z-index: 1000;
        }

        .message {
            background: rgba(0, 20, 0, 0.9);
            border-left: 4px solid var(--primary-matrix);
            padding: 15px;
            margin-top: 10px;
            border-radius: 4px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            animation: slideInRight 0.3s ease-out;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .message-error {
            border-left-color: var(--error-red);
            background: rgba(50, 0, 0, 0.9);
        }

        .message-success {
            border-left-color: var(--primary-matrix);
            background: rgba(0, 30, 0, 0.9);
        }

        .message-icon {
            font-size: 1.5em;
        }

        /* ===== PANNEAU LAT√âRAL ===== */
        .side-panel {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 250px;
            background: rgba(0, 20, 0, 0.8);
            border: var(--neon-border);
            border-radius: 8px;
            padding: 20px;
            z-index: 50;
            backdrop-filter: blur(5px);
        }

        .panel-section {
            margin-bottom: 25px;
        }

        .panel-title {
            color: var(--secondary-matrix);
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(0, 255, 0, 0.3);
        }

        .progress-container {
            width: 100%;
            height: 8px;
            background: rgba(0, 255, 0, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-matrix), var(--secondary-matrix));
            width: 0%;
            transition: width 1s ease-out;
            border-radius: 4px;
        }

        /* ===== SYST√àME D'√âNIGMES ===== */
        .puzzle-container {
            background: rgba(0, 10, 0, 0.7);
            border: 1px solid rgba(0, 255, 0, 0.2);
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .puzzle-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 255, 0, 0.1);
        }

        .puzzle-title {
            color: var(--secondary-matrix);
            font-size: 1.2em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .puzzle-difficulty {
            font-size: 0.8em;
            color: var(--warning-yellow);
        }

        .puzzle-content {
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .puzzle-hint {
            background: rgba(0, 255, 0, 0.05);
            border-left: 3px solid var(--warning-yellow);
            padding: 10px;
            margin-top: 15px;
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.7);
            display: none;
        }

        .hint-button {
            background: transparent;
            border: 1px solid var(--warning-yellow);
            color: var(--warning-yellow);
            padding: 5px 10px;
            font-size: 0.8em;
            cursor: pointer;
            margin-top: 10px;
            transition: all var(--transition-speed);
        }

        .hint-button:hover {
            background: rgba(255, 204, 0, 0.1);
        }

        /* ===== ANIMATIONS ===== */
        @keyframes terminalBoot {
            0% { 
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            100% { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes typeIn {
            from { 
                opacity: 0;
                transform: translateX(-10px);
            }
            to { 
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @keyframes scanlines {
            0% { background-position: 0 0, 0 0; }
            100% { background-position: 0 100%, 100% 0; }
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        /* ===== √âTATS RESPONSIVES ===== */
        @media (max-width: 1200px) {
            .side-panel {
                position: relative;
                left: 0;
                top: 0;
                transform: none;
                width: 100%;
                max-width: 600px;
                margin: 20px auto;
            }
            
            .main-terminal {
                width: 95%;
            }
        }

        @media (max-width: 768px) {
            .terminal-header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .header-status {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .terminal-body {
                padding: 15px;
                font-size: 1em;
            }
            
            .message-system {
                width: calc(100% - 40px);
                right: 20px;
            }
        }

        /* ===== CLASSES UTILITAIRES ===== */
        .hidden { display: none !important; }
        .visible { display: block !important; }
        
        .glitch {
            animation: glitch 0.5s infinite;
            color: #f0f;
            text-shadow: 2px 0 #0ff, -2px 0 #ff0;
        }
        
        .text-success { color: var(--primary-matrix); }
        .text-error { color: var(--error-red); }
        .text-warning { color: var(--warning-yellow); }
        .text-info { color: var(--secondary-matrix); }
        
        .shake {
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        /* ===== SYST√àME DE CHARGEMENT ===== */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 1s ease-out;
        }

        .loading-text {
            font-size: 1.5em;
            margin-bottom: 30px;
            text-align: center;
        }

        .loading-bar {
            width: 300px;
            height: 4px;
            background: rgba(0, 255, 0, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress {
            height: 100%;
            background: var(--primary-matrix);
            width: 0%;
            transition: width 0.3s ease-out;
            box-shadow: 0 0 10px var(--primary-matrix);
        }

        .loading-dots {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .loading-dot {
            width: 10px;
            height: 10px;
            background: var(--primary-matrix);
            border-radius: 50%;
            opacity: 0.3;
            animation: loadingDot 1.4s infinite;
        }

        .loading-dot:nth-child(2) { animation-delay: 0.2s; }
        .loading-dot:nth-child(3) { animation-delay: 0.4s; }
        .loading-dot:nth-child(4) { animation-delay: 0.6s; }

        @keyframes loadingDot {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
    </style>
</head>

<body class="no-select no-context" oncontextmenu="return false;" onkeydown="return SecuritySystem.keyHandler(event);">
    <!-- √âCRAN DE CHARGEMENT -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-text" id="loading-status">
            Initialisation du Protocole Om√©ga...
        </div>
        <div class="loading-bar">
            <div class="loading-progress" id="loading-progress"></div>
        </div>
        <div class="loading-dots">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
        </div>
    </div>

    <!-- OVERLAYS CRT -->
    <div class="crt-overlay"></div>
    <div class="crt-glow"></div>

    <!-- CANVAS MATRICE -->
    <canvas id="matrix-canvas"></canvas>
    <canvas id="particles-canvas"></canvas>

    <!-- CONTAINER PRINCIPAL -->
    <div id="game-container">
        <!-- TERMINAL CENTRAL -->
        <div class="main-terminal" id="main-terminal">
            <div class="terminal-header">
                <div class="header-title">
                    <span class="text-success">PROTOCOLE OM√âGA v2.0</span> | 
                    <span class="text-info">SYST√àME DE D√âFENSE CYBERN√âTIQUE</span>
                </div>
                <div class="header-status">
                    <div class="status-item">
                        <div class="status-led led-green"></div>
                        <span>Noyau</span>
                    </div>
                    <div class="status-item">
                        <div class="status-led led-red"></div>
                        <span>D√©fense</span>
                    </div>
                    <div class="status-item">
                        <div class="status-led led-blue"></div>
                        <span>R√©seau</span>
                    </div>
                </div>
            </div>

            <div class="terminal-body" id="terminal-body">
                <!-- Contenu dynamique inject√© par JavaScript -->
            </div>

            <div class="input-container">
                <span class="prompt">ROOT@OMEGA:~#</span>
                <input type="text" id="command-input" 
                       placeholder="Entrez votre commande..." 
                       autocomplete="off" 
                       spellcheck="false"
                       maxlength="100">
                <button class="input-button" onclick="GameEngine.submitCommand()">EX√âCUTER</button>
            </div>
        </div>

        <!-- PANNEAU LAT√âRAL -->
        <div class="side-panel" id="side-panel">
            <div class="panel-section">
                <div class="panel-title">Statut Mission</div>
                <div class="progress-container">
                    <div class="progress-bar" id="mission-progress"></div>
                </div>
                <div class="text-info" id="mission-status">Niveau 1/15 - Initialisation</div>
            </div>

            <div class="panel-section">
                <div class="panel-title">Syst√®me de S√©curit√©</div>
                <div id="security-status">
                    <div>‚Ä¢ Firewall: <span class="text-success">ACTIF</span></div>
                    <div>‚Ä¢ Cryptage: <span class="text-warning">AES-256</span></div>
                    <div>‚Ä¢ Surveillance: <span class="text-error">ALERTE</span></div>
                </div>
            </div>

            <div class="panel-section">
                <div class="panel-title">Indices Disponibles</div>
                <div id="hint-counter">3/3 restants</div>
                <button class="hint-button" onclick="GameEngine.requestHint()">DEMANDER UN INDICE</button>
            </div>
        </div>

        <!-- SYST√àME DE MESSAGES -->
        <div class="message-system" id="message-system"></div>
    </div>

    <!-- SYST√àME AUDIO (cach√©) -->
    <audio id="audio-click" preload="auto">
        <source src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==" type="audio/wav">
    </audio>
    <audio id="audio-success" preload="auto">
        <source src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==" type="audio/wav">
    </audio>
    <audio id="audio-error" preload="auto">
        <source src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==" type="audio/wav">
    </audio>

    <script>
        /* ====================================================
           SYST√àME DE S√âCURIT√â ANTI-INSPECTION
           ==================================================== */
        class SecuritySystem {
            constructor() {
                this.inspectionDetected = false;
                this.antiTamperEnabled = true;
                this.initSecurity();
            }

            initSecurity() {
                // D√©sactiver les raccourcis d'inspection
                this.disableDevTools();
                
                // Surveiller les ouvertures d'inspecteur
                this.monitorDevTools();
                
                // D√©sactiver le clic droit
                this.disableContextMenu();
                
                // Surveillance continue
                this.startSecurityLoop();
                
                // Protection des r√©ponses
                this.obfuscateAnswers();
            }

            disableDevTools() {
                const disableShortcuts = (e) => {
                    // Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+Shift+C, F12
                    if (
                        (e.ctrlKey && e.shiftKey && ['I', 'J', 'C'].includes(e.key)) ||
                        e.key === 'F12' ||
                        (e.ctrlKey && e.key === 'U')
                    ) {
                        e.preventDefault();
                        e.stopPropagation();
                        this.triggerSecurityAlert();
                        return false;
                    }
                    return true;
                };

                document.addEventListener('keydown', disableShortcuts);
                document.addEventListener('keyup', disableShortcuts);
            }

            monitorDevTools() {
                // D√©tection par diff√©rence de taille d'√©cran
                const checkDevTools = () => {
                    const widthThreshold = window.outerWidth - window.innerWidth > 160;
                    const heightThreshold = window.outerHeight - window.innerHeight > 160;
                    
                    if (widthThreshold || heightThreshold) {
                        this.triggerSecurityAlert();
                    }
                };

                setInterval(checkDevTools, 1000);

                // D√©tection par deboguer
                const debuggerCheck = () => {
                    const startTime = performance.now();
                    debugger;
                    const endTime = performance.now();
                    
                    if (endTime - startTime > 100) {
                        this.triggerSecurityAlert();
                    }
                };

                setInterval(debuggerCheck, 10000);
            }

            disableContextMenu() {
                document.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                    this.showMessage('Menu contextuel d√©sactiv√© pour raisons de s√©curit√©.', 'error');
                    return false;
                });
            }

            startSecurityLoop() {
                setInterval(() => {
                    // V√©rification d'int√©grit√©
                    this.checkPageIntegrity();
                    
                    // Surveillance m√©moire
                    this.memoryCheck();
                    
                    // Protection contre les modifications DOM
                    this.domProtection();
                }, 5000);
            }

            checkPageIntegrity() {
                const criticalElements = ['game-container', 'main-terminal', 'command-input'];
                criticalElements.forEach(id => {
                    const element = document.getElementById(id);
                    if (!element) {
                        this.triggerSecurityAlert();
                    }
                });
            }

            memoryCheck() {
                // V√©rification de consommation m√©moire anormale
                if (performance.memory) {
                    const usedMemory = performance.memory.usedJSHeapSize;
                    if (usedMemory > 100000000) { // 100MB
                        this.showMessage('Activit√© m√©moire suspecte d√©tect√©e', 'warning');
                    }
                }
            }

            domProtection() {
                // Emp√™cher la modification des √©l√©ments critiques
                const terminal = document.getElementById('terminal-body');
                if (terminal) {
                    terminal.setAttribute('data-protected', 'true');
                    Object.freeze(terminal);
                }
            }

            obfuscateAnswers() {
                // Chiffrement simple des r√©ponses
                window._encryptedAnswers = {
                    level1: this.rot13('NZNYVA'),
                    level2: this.rot13('BZRTN_CBYBGBY_77'),
                    level3: this.rot13('PNRFNE_FLPVFP'),
                    level4: this.rot13('30'),
                    level5: this.rot13('WNINFPEVG_ZNFRGRE'),
                    level6: this.rot13('IVYYVGGVBA'),
                    level7: this.rot13('SHA256'),
                    level8: this.rot13('101010'),
                    level9: this.rot13('OVGQBA'),
                    level10: this.rot13('QRABA'),
                    level11: this.rot13('VGJVYYVRF'),
                    level12: this.rot13('FPUBBY_BS_PBQR'),
                    level13: this.rot13('ANATREPNGVBA'),
                    level14: this.rot13('QVERPGBHE'),
                    level15: this.rot13('PBZCHGRE_FRPHEVGL')
                };
            }

            rot13(str) {
                return str.replace(/[A-Z]/g, (c) => 
                    String.fromCharCode((c.charCodeAt(0) - 65 + 13) % 26 + 65)
                );
            }

            triggerSecurityAlert() {
                if (!this.inspectionDetected) {
                    this.inspectionDetected = true;
                    document.body.classList.add('anti-inspect');
                    
                    // D√©sactiver le jeu
                    GameEngine.active = false;
                    
                    // Effacer les donn√©es sensibles
                    this.wipeSensitiveData();
                    
                    // Message d'alerte
                    setTimeout(() => {
                        alert('SYST√àME DE S√âCURIT√â: Tentative d\'acc√®s non autoris√© d√©tect√©e.\nLe syst√®me a √©t√© verrouill√©.');
                        location.reload();
                    }, 1000);
                }
            }

            wipeSensitiveData() {
                // Effacer les variables sensibles
                window._encryptedAnswers = null;
                if (window.GameEngine) {
                    GameEngine.puzzles = [];
                    GameEngine.currentLevel = 0;
                }
            }

            showMessage(text, type) {
                GameEngine.showMessage(text, type);
            }

            static keyHandler(e) {
                const security = new SecuritySystem();
                return security.handleKey(e);
            }

            handleKey(e) {
                // Bloquer Ctrl+S (sauvegarde)
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    this.showMessage('Sauvegarde d√©sactiv√©e pour s√©curit√©', 'warning');
                    return false;
                }
                return true;
            }
        }

        /* ====================================================
           MOTEUR DE MATRICE AVANC√â
           ==================================================== */
        class MatrixEngine {
            constructor() {
                this.canvas = document.getElementById('matrix-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.particlesCanvas = document.getElementById('particles-canvas');
                this.particlesCtx = this.particlesCanvas.getContext('2d');
                this.matrixChars = '„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®„É©„É™„É´„É¨„É≠„ÉØ„É≤„É≥0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ$#&@%!';
                this.fontSize = 18;
                this.columns = 0;
                this.drops = [];
                this.particles = [];
                this.init();
            }

            init() {
                this.resize();
                window.addEventListener('resize', () => this.resize());
                this.animate();
                this.createParticles();
            }

            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
                this.particlesCanvas.width = window.innerWidth;
                this.particlesCanvas.height = window.innerHeight;
                
                this.columns = Math.floor(this.canvas.width / this.fontSize);
                this.drops = Array(this.columns).fill().map(() => Math.random() * -100);
            }

            drawMatrix() {
                // Fond semi-transparent pour effet de tra√Æn√©e
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Couleurs d√©grad√©es
                const gradient = this.ctx.createLinearGradient(0, 0, 0, this.canvas.height);
                gradient.addColorStop(0, '#0f0');
                gradient.addColorStop(0.5, '#0ff');
                gradient.addColorStop(1, '#0f0');
                
                this.ctx.fillStyle = gradient;
                this.ctx.font = `${this.fontSize}px 'Courier New', monospace`;
                
                // Dessiner les caract√®res
                for (let i = 0; i < this.columns; i++) {
                    const char = this.matrixChars[Math.floor(Math.random() * this.matrixChars.length)];
                    const x = i * this.fontSize;
                    const y = this.drops[i] * this.fontSize;
                    
                    // Effet d'ombre
                    this.ctx.shadowBlur = 10;
                    this.ctx.shadowColor = '#0f0';
                    this.ctx.fillText(char, x, y);
                    this.ctx.shadowBlur = 0;
                    
                    // R√©initialiser les gouttes qui sortent de l'√©cran
                    if (y > this.canvas.height && Math.random() > 0.975) {
                        this.drops[i] = 0;
                    }
                    
                    this.drops[i]++;
                }
            }

            createParticles() {
                for (let i = 0; i < 100; i++) {
                    this.particles.push({
                        x: Math.random() * this.particlesCanvas.width,
                        y: Math.random() * this.particlesCanvas.height,
                        size: Math.random() * 3 + 1,
                        speedX: Math.random() * 1 - 0.5,
                        speedY: Math.random() * 1 - 0.5,
                        color: Math.random() > 0.5 ? '#0f0' : '#0ff'
                    });
                }
            }

            drawParticles() {
                this.particlesCtx.clearRect(0, 0, this.particlesCanvas.width, this.particlesCanvas.height);
                
                this.particles.forEach(particle => {
                    this.particlesCtx.beginPath();
                    this.particlesCtx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                    this.particlesCtx.fillStyle = particle.color;
                    this.particlesCtx.fill();
                    
                    // D√©placement
                    particle.x += particle.speedX;
                    particle.y += particle.speedY;
                    
                    // Rebond sur les bords
                    if (particle.x < 0 || particle.x > this.particlesCanvas.width) particle.speedX *= -1;
                    if (particle.y < 0 || particle.y > this.particlesCanvas.height) particle.speedY *= -1;
                });
            }

            animate() {
                this.drawMatrix();
                this.drawParticles();
                requestAnimationFrame(() => this.animate());
            }
        }

        /* ====================================================
           MOTEUR DE JEU PRINCIPAL
           ==================================================== */
        class GameEngine {
            static puzzles = [];
            static currentLevel = 0;
            static hintsRemaining = 3;
            static active = false;
            static commandHistory = [];
            static historyIndex = 0;

            static init() {
                // Initialiser la s√©curit√©
                new SecuritySystem();
                
                // Initialiser la matrice
                new MatrixEngine();
                
                // Charger les √©nigmes
                this.loadPuzzles();
                
                // Configurer les √©v√©nements
                this.setupEvents();
                
                // D√©marrer le jeu
                this.startGame();
            }

            static loadPuzzles() {
                // √ânigmes avec r√©ponses chiffr√©es
                this.puzzles = [
                    {
                        id: 1,
                        title: "√âNIGME INITIALE",
                        difficulty: "‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ",
                        content: `
                            <p>> Acc√®s initial au syst√®me...</p>
                            <p>> Je suis toujours devant toi, mais tu ne peux jamais me voir.</p>
                            <p>> Je suis le d√©but de la fin et la fin du temps.</p>
                            <p>> Je suis pr√©sent dans hier, absent dans demain.</p>
                            <p>> Que suis-je ?</p>
                            <br>
                            <p class="text-info">Format: UN_MOT (en majuscules)</p>
                        `,
                        hint: "Regarde dans le mot 'pr√©sent'...",
                        answer: "AUJOURD_HUI",
                        encrypted: true
                    },
                    {
                        id: 2,
                        title: "CRYPTANALYSE DE BASE",
                        difficulty: "‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ",
                        content: `
                            <p>> Interception de transmission crypt√©e...</p>
                            <p>> Message re√ßu: <strong class="glitch">XLI HIVWMG MR XLI TIVMSH</strong></p>
                            <p>> M√©thode: Chiffrement par d√©calage (ROT-4)</p>
                            <br>
                            <p class="text-warning">D√©chiffrez le message original.</p>
                        `,
                        hint: "ROT-4 signifie d√©caler chaque lettre de 4 positions vers l'arri√®re dans l'alphabet.",
                        answer: "THE_DESIGN_OF_THE_PUZZLE",
                        encrypted: true
                    },
                    {
                        id: 3,
                        title: "LOGIQUE BINAIRE",
                        difficulty: "‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ",
                        content: `
                            <p>> Analyse de circuit logique...</p>
                            <p>> Entr√©e: 1010 (binaire)</p>
                            <p>> Op√©ration: XOR avec 0110</p>
                            <p>> R√©sultat: ??? (convertir en d√©cimal)</p>
                            <br>
                            <p class="text-info">Op√©ration binaire: 1010 XOR 0110 = ???</p>
                        `,
                        hint: "XOR: 1 si les bits sont diff√©rents, 0 s'ils sont identiques.",
                        answer: "12",
                        encrypted: true
                    },
                    {
                        id: 4,
                        title: "INSPECTION DE CODE",
                        difficulty: "‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ",
                        content: `
                            <p>> Scan du syst√®me en cours...</p>
                            <p>> Trouvez la fonction cach√©e dans la console.</p>
                            <p>> Tapez: <code class="text-success">getSecretCode()</code> dans la console JavaScript</p>
                            <br>
                            <p class="text-warning">Attention: Utilisez F12 avec prudence!</p>
                        `,
                        hint: "La fonction retourne un code en hexad√©cimal.",
                        answer: "0x4F4D454741",
                        encrypted: true
                    },
                    {
                        id: 5,
                        title: "MATH√âMATIQUES CYBER",
                        difficulty: "‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ",
                        content: `
                            <p>> Calcul de trajectoire...</p>
                            <p>> Si: x¬≤ - 5x + 6 = 0</p>
                            <p>> Quelles sont les solutions? (s√©par√©es par une virgule)</p>
                            <br>
                            <p class="text-info">Format: nombre,nombre (ex: 1,2)</p>
                        `,
                        hint: "Factorisez l'√©quation: (x-2)(x-3)=0",
                        answer: "2,3",
                        encrypted: true
                    },
                    {
                        id: 6,
                        title: "ST√âGANOGRAPHIE",
                        difficulty: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ",
                        content: `
                            <p>> Analyse d'image corrompue...</p>
                            <p>> Regardez attentivement le titre de la page.</p>
                            <p>> Le code est cach√© dans les m√©tadonn√©es invisibles.</p>
                            <br>
                            <p class="text-warning">Indice: Inspectez l'√©l√©ment &lt;title&gt;</p>
                        `,
                        hint: "Le titre change quand vous passez la souris sur certains √©l√©ments.",
                        answer: "TITRE_DYNAMIQUE",
                        encrypted: true
                    },
                    {
                        id: 7,
                        title: "CRYPTO SHA-256",
                        difficulty: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                        content: `
                            <p>> Hash SHA-256 √† inverser...</p>
                            <p>> Hash: 2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824</p>
                            <p>> Trouvez le mot original (en minuscules).</p>
                            <br>
                            <p class="text-info">C'est un hash connu d'un mot commun.</p>
                        `,
                        hint: "C'est le hash SHA-256 de 'hello'",
                        answer: "hello",
                        encrypted: true
                    },
                    {
                        id: 8,
                        title: "ENCODAGE BASE64",
                        difficulty: "‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ",
                        content: `
                            <p>> Message encod√© d√©tect√©...</p>
                            <p>> R2V0IHJlYWR5IGZvciBsZXZlbCA5</p>
                            <p>> D√©codez ce message Base64.</p>
                            <br>
                            <p class="text-warning">Utilisez la fonction atob() dans la console.</p>
                        `,
                        hint: "atob('R2V0IHJlYWR5IGZvciBsZXZlbCA5')",
                        answer: "GET_READY_FOR_LEVEL_9",
                        encrypted: true
                    },
                    {
                        id: 9,
                        title: "CODE MORSE",
                        difficulty: "‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ",
                        content: `
                            <p>> Transmission radio intercept√©e...</p>
                            <p>> .... . .-.. .-.. --- / -- --- .-. ... .</p>
                            <p>> D√©codez le message Morse.</p>
                            <br>
                            <p class="text-info">Format: HELLO_MORSE (majuscules avec underscores)</p>
                        `,
                        hint: "H=...., E=., L=.-.., O=---",
                        answer: "HELLO_MORSE",
                        encrypted: true
                    },
                    {
                        id: 10,
                        title: "R√âFLEXION MIRROIR",
                        difficulty: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ",
                        content: `
                            <p>> Message miroir d√©tect√©...</p>
                            <p>> …ê å…êp …ê á «ù…πƒ± å«ù…π</p>
                            <p>> Lisez ce message invers√©.</p>
                            <br>
                            <p class="text-warning">Utilisez un miroir ou r√©fl√©chissez!</p>
                        `,
                        hint: "Tournez votre t√™te ou utilisez un vrai miroir.",
                        answer: "REVERSE_DATA",
                        encrypted: true
                    },
                    {
                        id: 11,
                        title: "JAVASCRIPT OBFUSQU√â",
                        difficulty: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                        content: `
                            <p>> Code obfusqu√© analys√©...</p>
                            <p>> √âvaluez: <code>(!![]+[])[+!+[]]+([![]]+[][[]])[+!+[]+[+[]]]</code></p>
                            <p>> Ex√©cutez dans la console.</p>
                            <br>
                            <p class="text-info">C'est du JavaScript bizarre mais valide!</p>
                        `,
                        hint: "Cela √©value √† 'ib' mais ce n'est pas la r√©ponse finale...",
                        answer: "JSFUCK",
                        encrypted: true
                    },
                    {
                        id: 12,
                        title: "CSS SECRET",
                        difficulty: "‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ",
                        content: `
                            <p>> Analyse de feuille de style...</p>
                            <p>> Trouvez la valeur de --secret-color</p>
                            <p>> Inspectez les styles de l'√©l√©ment body.</p>
                            <br>
                            <p class="text-warning">Utilisez l'inspecteur d'√©l√©ments!</p>
                        `,
                        hint: "Regardez dans les propri√©t√©s CSS personnalis√©es (variables).",
                        answer: "#FF00FF",
                        encrypted: true
                    },
                    {
                        id: 13,
                        title: "UNICODE MYST√àRE",
                        difficulty: "‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ",
                        content: `
                            <p>> Caract√®res Unicode d√©tect√©s...</p>
                            <p>> U+004F U+004D U+0045 U+0047 U+0041</p>
                            <p>> Convertissez ces codes Unicode en texte.</p>
                            <br>
                            <p class="text-info">Utilisez String.fromCharCode()</p>
                        `,
                        hint: "fromCharCode(0x4F, 0x4D, 0x45, 0x47, 0x41)",
                        answer: "OMEGA",
                        encrypted: true
                    },
                    {
                        id: 14,
                        title: "√âNIGME FINALE - PORTE VERROUILL√âE",
                        difficulty: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                        content: `
                            <p>> PORTE FINALE D√âTECT√âE</p>
                            <p>> Combinez toutes les r√©ponses pr√©c√©dentes</p>
                            <p>> Utilisez la premi√®re lettre de chaque r√©ponse</p>
                            <br>
                            <p class="glitch">SYST√àME EN ALERTE MAXIMUM</p>
                        `,
                        hint: "ADHJMOSTUW#0GJ - C'est l'anagramme de la r√©ponse",
                        answer: "MASTER_CODE_BREAKER",
                        encrypted: true
                    },
                    {
                        id: 15,
                        title: "SACRIFICE FINAL",
                        difficulty: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
                        content: `
                            <p>> F√âLICITATIONS AGENT</p>
                            <p>> Derni√®re √©tape: Sacrifiez votre progression</p>
                            <p>> Tapez: <strong class="text-error">RESET_SYSTEM</strong></p>
                            <br>
                            <p class="text-warning">Attention: Effacera toutes vos donn√©es!</p>
                        `,
                        hint: "Il faut vraiment taper RESET_SYSTEM",
                        answer: "RESET_SYSTEM",
                        encrypted: true
                    }
                ];
            }

            static setupEvents() {
                const input = document.getElementById('command-input');
                
                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        this.submitCommand();
                    } else if (e.key === 'ArrowUp') {
                        e.preventDefault();
                        this.navigateHistory(-1);
                    } else if (e.key === 'ArrowDown') {
                        e.preventDefault();
                        this.navigateHistory(1);
                    }
                });

                input.addEventListener('input', () => {
                    input.style.borderBottomColor = '#0f0';
                });

                // Fonction secr√®te pour la console
                window.getSecretCode = () => {
                    console.log('%c [SECRET] Code d√©verrouill√©: 0x4F4D454741', 'color: #0f0; font-size: 16px;');
                    console.log('%c Utilisez ce code pour l\'√©nigme 4', 'color: #0ff;');
                    return "0x4F4D454741";
                };
            }

            static startGame() {
                // Simuler le chargement
                this.simulateLoading(() => {
                    // Cacher l'√©cran de chargement
                    document.getElementById('loading-screen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('loading-screen').classList.add('hidden');
                        this.active = true;
                        this.showLevel(0);
                        this.showMessage('Syst√®me Om√©ga initialis√©. Bonne chance, agent.', 'success');
                    }, 1000);
                });
            }

            static simulateLoading(callback) {
                const status = document.getElementById('loading-status');
                const progress = document.getElementById('loading-progress');
                const steps = [
                    'Chargement du noyau...',
                    'Initialisation du cryptage...',
                    'D√©marrage de la matrice...',
                    'Chargement des √©nigmes...',
                    'Activation des contre-mesures...',
                    'Syst√®me pr√™t...'
                ];
                
                let currentStep = 0;
                
                const interval = setInterval(() => {
                    if (currentStep < steps.length) {
                        status.textContent = steps[currentStep];
                        progress.style.width = `${((currentStep + 1) / steps.length) * 100}%`;
                        currentStep++;
                    } else {
                        clearInterval(interval);
                        callback();
                    }
                }, 500);
            }

            static showLevel(levelIndex) {
                if (levelIndex >= this.puzzles.length) {
                    this.showVictory();
                    return;
                }

                this.currentLevel = levelIndex;
                const puzzle = this.puzzles[levelIndex];
                
                // Mettre √† jour l'affichage
                const terminal = document.getElementById('terminal-body');
                const progress = document.getElementById('mission-progress');
                const status = document.getElementById('mission-status');
                
                // Construire le contenu
                let content = `
                    <div class="puzzle-container">
                        <div class="puzzle-header">
                            <div class="puzzle-title">${puzzle.title}</div>
                            <div class="puzzle-difficulty">${puzzle.difficulty}</div>
                        </div>
                        <div class="puzzle-content">${puzzle.content}</div>
                        <div class="puzzle-hint" id="puzzle-hint"></div>
                        <button class="hint-button" onclick="GameEngine.toggleHint()">AFFICHER L'INDICE</button>
                    </div>
                    
                    <div class="prompt-line">
                        <span class="prompt">ROOT@OMEGA[LVL${puzzle.id}]:~#</span>
                        <span class="prompt-cursor"></span>
                    </div>
                `;
                
                terminal.innerHTML = content;
                terminal.scrollTop = terminal.scrollHeight;
                
                // Mettre √† jour la progression
                const progressPercent = ((levelIndex + 1) / this.puzzles.length) * 100;
                progress.style.width = `${progressPercent}%`;
                status.textContent = `Niveau ${puzzle.id}/${this.puzzles.length} - ${puzzle.title}`;
                
                // Mettre √† jour les indices
                document.getElementById('hint-counter').textContent = `${this.hintsRemaining}/3 restants`;
                
                // Focus sur l'input
                document.getElementById('command-input').focus();
            }

            static submitCommand() {
                if (!this.active) return;
                
                const input = document.getElementById('command-input');
                const command = input.value.trim().toUpperCase();
                
                if (!command) return;
                
                // Ajouter √† l'historique
                this.commandHistory.push(command);
                this.historyIndex = this.commandHistory.length;
                
                // Traiter la commande
                this.processCommand(command);
                
                // Effacer l'input
                input.value = '';
            }

            static processCommand(command) {
                const puzzle = this.puzzles[this.currentLevel];
                let correctAnswer = puzzle.answer;
                
                // D√©crypter la r√©ponse si n√©cessaire
                if (puzzle.encrypted && window._encryptedAnswers) {
                    const key = `level${puzzle.id}`;
                    if (window._encryptedAnswers[key]) {
                        correctAnswer = this.rot13(window._encryptedAnswers[key]);
                    }
                }
                
                if (command === correctAnswer || 
                    (Array.isArray(correctAnswer) && correctAnswer.includes(command))) {
                    // R√©ponse correcte
                    this.showMessage(`Acc√®s autoris√©. Niveau ${puzzle.id} r√©ussi!`, 'success');
                    this.playSound('success');
                    
                    // Passer au niveau suivant
                    setTimeout(() => {
                        this.showLevel(this.currentLevel + 1);
                    }, 1500);
                    
                    // Effet visuel
                    document.querySelector('.main-terminal').style.boxShadow = 
                        '0 0 50px rgba(0, 255, 0, 0.5)';
                    setTimeout(() => {
                        document.querySelector('.main-terminal').style.boxShadow = 
                            '0 0 30px rgba(0, 255, 0, 0.3)';
                    }, 1000);
                    
                } else {
                    // R√©ponse incorrecte
                    this.showMessage(`Acc√®s refus√©. R√©ponse incorrecte.`, 'error');
                    this.playSound('error');
                    
                    // Effet shake
                    document.querySelector('.main-terminal').classList.add('shake');
                    setTimeout(() => {
                        document.querySelector('.main-terminal').classList.remove('shake');
                    }, 500);
                    
                    // D√©cr√©menter les indices si plusieurs erreurs
                    const errorCount = this.commandHistory.filter(cmd => 
                        cmd !== correctAnswer
                    ).length;
                    
                    if (errorCount > 2 && this.hintsRemaining > 0) {
                        this.hintsRemaining--;
                        document.getElementById('hint-counter').textContent = 
                            `${this.hintsRemaining}/3 restants`;
                        this.showMessage('Indice automatique d√©bloqu√©', 'warning');
                        this.toggleHint(true);
                    }
                }
            }

            static requestHint() {
                if (this.hintsRemaining <= 0) {
                    this.showMessage('Plus d\'indices disponibles', 'error');
                    return;
                }
                
                this.hintsRemaining--;
                document.getElementById('hint-counter').textContent = 
                    `${this.hintsRemaining}/3 restants`;
                
                this.toggleHint(true);
                this.showMessage('Indice d√©bloqu√©', 'success');
            }

            static toggleHint(forceShow = false) {
                const hintElement = document.getElementById('puzzle-hint');
                const puzzle = this.puzzles[this.currentLevel];
                
                if (forceShow || hintElement.style.display !== 'block') {
                    hintElement.textContent = `Indice: ${puzzle.hint}`;
                    hintElement.style.display = 'block';
                } else {
                    hintElement.style.display = 'none';
                }
            }

            static navigateHistory(direction) {
                if (this.commandHistory.length === 0) return;
                
                this.historyIndex = Math.max(0, Math.min(
                    this.commandHistory.length - 1,
                    this.historyIndex + direction
                ));
                
                const input = document.getElementById('command-input');
                if (this.historyIndex >= 0 && this.historyIndex < this.commandHistory.length) {
                    input.value = this.commandHistory[this.historyIndex];
                }
            }

            static showMessage(text, type = 'info') {
                const messageSystem = document.getElementById('message-system');
                const message = document.createElement('div');
                message.className = `message message-${type}`;
                
                let icon = 'üí°';
                if (type === 'error') icon = '‚ùå';
                if (type === 'success') icon = '‚úÖ';
                if (type === 'warning') icon = '‚ö†Ô∏è';
                
                message.innerHTML = `
                    <span class="message-icon">${icon}</span>
                    <span>${text}</span>
                `;
                
                messageSystem.appendChild(message);
                
                // Supprimer apr√®s 5 secondes
                setTimeout(() => {
                    if (message.parentNode) {
                        message.style.opacity = '0';
                        setTimeout(() => {
                            if (message.parentNode) {
                                messageSystem.removeChild(message);
                            }
                        }, 300);
                    }
                }, 5000);
                
                // Limiter √† 5 messages maximum
                while (messageSystem.children.length > 5) {
                    messageSystem.removeChild(messageSystem.firstChild);
                }
            }

            static playSound(type) {
                try {
                    const audio = document.getElementById(`audio-${type}`);
                    if (audio) {
                        audio.currentTime = 0;
                        audio.play().catch(() => {});
                    }
                } catch (e) {
                    // Ignorer les erreurs audio
                }
            }

            static rot13(str) {
                return str.replace(/[A-Z]/g, (c) => 
                    String.fromCharCode((c.charCodeAt(0) - 65 + 13) % 26 + 65)
                );
            }

            static showVictory() {
                const terminal = document.getElementById('terminal-body');
                terminal.innerHTML = `
                    <div style="text-align: center; padding: 50px;">
                        <h1 class="glitch" style="font-size: 3em; color: #0ff;">PROTOCOLE OM√âGA TERMIN√â</h1>
                        <br>
                        <p style="font-size: 1.5em;">F√âLICITATIONS, AGENT</p>
                        <br>
                        <p>Vous avez r√©ussi √† p√©n√©trer tous les syst√®mes de s√©curit√©.</p>
                        <p>Votre nom sera inscrit dans les archives des Ma√Ætres du Code.</p>
                        <br>
                        <div style="border: 2px solid #0ff; padding: 20px; margin: 20px; border-radius: 10px;">
                            <p>Code Final: <strong class="text-success">OMEGA_ACCESS_GRANTED</strong></p>
                            <p>Niveaux compl√©t√©s: <strong>${this.puzzles.length}</strong></p>
                            <p>Temps estim√©: <strong>${Math.floor(Math.random() * 120) + 60} minutes</strong></p>
                        </div>
                        <br>
                        <button class="input-button" onclick="location.reload()" 
                                style="font-size: 1.2em; padding: 15px 30px;">
                            RED√âMARRER LE SYST√àME
                        </button>
                    </div>
                `;
                
                document.getElementById('input-container').classList.add('hidden');
                document.getElementById('side-panel').classList.add('hidden');
                
                // Confetti sp√©cial
                this.startVictoryEffects();
                
                this.showMessage('Mission accomplie! Vous √™tes un v√©ritable ma√Ætre hacker!', 'success');
            }

            static startVictoryEffects() {
                // Effets visuels de victoire
                const matrix = new MatrixEngine();
                const originalDraw = matrix.drawMatrix.bind(matrix);
                
                matrix.drawMatrix = function() {
                    // Fond arc-en-ciel
                    const gradient = this.ctx.createLinearGradient(0, 0, this.canvas.width, 0);
                    gradient.addColorStop(0, '#ff0000');
                    gradient.addColorStop(0.2, '#ff9900');
                    gradient.addColorStop(0.4, '#ffff00');
                    gradient.addColorStop(0.6, '#00ff00');
                    gradient.addColorStop(0.8, '#00ffff');
                    gradient.addColorStop(1, '#ff00ff');
                    
                    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                    
                    this.ctx.fillStyle = gradient;
                    this.ctx.font = `${this.fontSize}px 'Courier New', monospace`;
                    
                    for (let i = 0; i < this.columns; i++) {
                        const char = this.matrixChars[Math.floor(Math.random() * this.matrixChars.length)];
                        const x = i * this.fontSize;
                        const y = this.drops[i] * this.fontSize;
                        
                        this.ctx.shadowBlur = 15;
                        this.ctx.shadowColor = gradient;
                        this.ctx.fillText(char, x, y);
                        this.ctx.shadowBlur = 0;
                        
                        if (y > this.canvas.height && Math.random() > 0.95) {
                            this.drops[i] = 0;
                        }
                        
                        this.drops[i] += 0.5 + Math.random() * 2;
                    }
                };
            }
        }

        /* ====================================================
           INITIALISATION DU SYST√àME
           ==================================================== */
        document.addEventListener('DOMContentLoaded', () => {
            // D√©marrer le jeu
            GameEngine.init();
            
            // Protection suppl√©mentaire
            Object.freeze(window.GameEngine);
            Object.freeze(window._encryptedAnswers);
            
            // Titre dynamique pour l'√©nigme 6
            let titleIndex = 0;
            const secretTitles = [
                "PROTOCOLE OM√âGA v2.0",
                "TITRE_DYNAMIQUE",
                "SYST√àME COMPROMIS",
                "ACC√àS RESTREINT",
                "ALERTE NIVEAU 5"
            ];
            
            setInterval(() => {
                document.title = secretTitles[titleIndex % secretTitles.length];
                titleIndex++;
            }, 3000);
            
            // Ajouter des variables CSS secr√®tes
            const style = document.createElement('style');
            style.textContent = `
                body {
                    --secret-color: #FF00FF;
                    --hidden-code: "OMEGA_ACCESS";
                    --encrypted-key: "B64:" + btoa("PROTOCOLE");
                }
            `;
            document.head.appendChild(style);
        });

        /* ====================================================
           FONCTIONS GLOBALES POUR LE HTML
           ==================================================== */
        window.GameEngine = GameEngine;
        window.SecuritySystem = SecuritySystem;
    </script>
</body>
</html>
